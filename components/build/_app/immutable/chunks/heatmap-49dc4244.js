import{S as g,i as _,s as p,J as b,K as y,w as C,x as v,y as w,M as B,f as D,t as M,z as x,o as A}from"./index-2151f539.js";import{c as F}from"./client-f7e91b7c.js";import{c as E}from"./timestamp-2a2772e4.js";import{l as u,e as L,C as S}from"./chart-88fd4124.js";function k(e,t){return(t-e)/e}async function m(e,t,o,a){let r={};for(let n in e){const i=e[n],s=await F(i,t,o,a),l=s[0].close,f=s[s.length-1].close;r[i]=k(l,f)}return r}async function O(e,t,o){const a=E(t,o);return await m(e,t,a.from,a.to)}const d=-100,h=100,H=-40,T=40;function W(e){let t=1/0,o=-1/0;for(let a=0;a<e.length;a++){let r=e[a];if(r){let n=r.value;n[2]<t&&(t=n[2]),n[2]>o&&(o=n[2])}}for(let a=0;a<e.length;a++){let r=e[a];if(r){let n=r.value;n[2]>0?n[3]=u(n[2],[0,o],[T,h],!0):n[2]<0?n[3]=u(n[2],[t,0],[d,H],!0):n[3]=0,isFinite(n[3])||(n[3]=0)}}}async function j(e,t,o,a,r){let n={};o===0&&(n=await m(e,t,a,r)),o!==0&&(n=await O(e,t,o));const i=Object.keys(n).map(l=>{const f=n[l]*100;return{name:l,value:[f+100,f,f]}});return W(i),{tooltip:{formatter:function(l){return['<div class="tooltip-title">'+L(l.name)+"</div>",`Change: ${l.value[2].toFixed(2)}%`].join("")}},series:[{name:"ALL",type:"treemap",visualMin:d,visualMax:h,visualDimension:3,roam:!1,itemStyle:{borderColor:"black"},label:{show:!0,formatter:"{b}",textStyle:{color:"white",fontWeight:"bolder"}},levels:[{itemStyle:{borderWidth:3,borderColor:"#333",gapWidth:3},color:["#C30010","#D1001F","#DE0A26","#F01E2C","#FF2C2C","#F94449","#EE6B6E","#B9E3DA","#A2D9CE","#8BD0C2","#73C6B6","#5CBDAA","#45B39D","#2DAA91"],colorMappingBy:"value"}],data:i}]}}function I(e){let t,o,a;function r(i){e[6](i)}let n={};return e[0]!==void 0&&(n.option=e[0]),t=new S({props:n}),b.push(()=>y(t,"option",r,e[0])),{c(){C(t.$$.fragment)},l(i){v(t.$$.fragment,i)},m(i,s){w(t,i,s),a=!0},p(i,[s]){const l={};!o&&s&1&&(o=!0,l.option=i[0],B(()=>o=!1)),t.$set(l)},i(i){a||(D(t.$$.fragment,i),a=!0)},o(i){M(t.$$.fragment,i),a=!1},d(i){x(t,i)}}}function q(e,t,o){let{symbols:a=[]}=t,{resolution:r="D"}=t,{last:n=31}=t,{from:i=0}=t,{to:s=0}=t,l;A(async function(){o(0,l=await j(a,r,n,i,s))});function f(c){l=c,o(0,l)}return e.$$set=c=>{"symbols"in c&&o(1,a=c.symbols),"resolution"in c&&o(2,r=c.resolution),"last"in c&&o(3,n=c.last),"from"in c&&o(4,i=c.from),"to"in c&&o(5,s=c.to)},[l,a,r,n,i,s,f]}class N extends g{constructor(t){super(),_(this,t,q,I,p,{symbols:1,resolution:2,last:3,from:4,to:5})}}export{N as H};
