import{S as k,i as S,s as b,J as h,K as _,w as P,x as $,y as I,M as g,f,t as u,z as C,o as q,e as d,b as v,d as z,h as A,g as L,B as N}from"../../../chunks/index-bec66cf6.js";import{p as O}from"../../../chunks/client-f7e91b7c.js";import{C as U}from"../../../chunks/chart-017ebc62.js";async function M(s,i,t={}){if(t[s]!==void 0)return t[s].weight++,t;if(t[s]={weight:10,peers:[]},i===0)return t;try{const e=new Set(await O(s));e.delete(s),t[s].peers=[...e];for(let n in t[s].peers){let r=t[s].peers[n];t=await M(r,i-1,t)}}catch{}return t}async function j(s,i){const t=await M(s,i),e={nodes:[],links:[],categories:[]};let n={},r=0;for(let o in t)n[o]===void 0&&(n[o]=r,e.nodes.push({id:o,name:o,symbolSize:t[o].weight,category:r}),e.categories.push({name:o}),r++);let a={};for(let o in t){a[o]=new Set;for(let c in t[o].peers){const p=t[o].peers[c];if(a[p]!==void 0){a[p].has(o)||a[p].add(o);continue}a[o].has(p)||a[o].add(p)}}for(let o in a){const c=[...a[o]];for(let p in c){const m=c[p];e.links.push({source:o,target:m})}}return{title:{text:`${s} peers`,top:"bottom",left:"right"},tooltip:{},animationDuration:1500,animationEasingUpdate:"quinticInOut",series:[{type:"graph",layout:"circular",data:e.nodes,links:e.links,categories:e.categories,roam:!0,label:{show:!0,position:"center",formatter:"{b}"},lineStyle:{color:"source",curveness:.3},emphasis:{focus:"adjacency",lineStyle:{width:10}}}]}}function B(s){let i,t,e;function n(a){s[3](a)}let r={};return s[0]!==void 0&&(r.option=s[0]),i=new U({props:r}),h.push(()=>_(i,"option",n,s[0])),{c(){P(i.$$.fragment)},l(a){$(i.$$.fragment,a)},m(a,l){I(i,a,l),e=!0},p(a,[l]){const o={};!t&&l&1&&(t=!0,o.option=a[0],g(()=>t=!1)),i.$set(o)},i(a){e||(f(i.$$.fragment,a),e=!0)},o(a){u(i.$$.fragment,a),e=!1},d(a){C(i,a)}}}function D(s,i,t){let{symbol:e}=i,{depth:n}=i,r;q(async function(){t(0,r=await j(e,n))});function a(l){r=l,t(0,r)}return s.$$set=l=>{"symbol"in l&&t(1,e=l.symbol),"depth"in l&&t(2,n=l.depth)},[r,e,n,a]}class E extends k{constructor(i){super(),S(this,i,D,B,b,{symbol:1,depth:2})}}function y(s){let i,t,e,n;function r(o){s[3](o)}function a(o){s[4](o)}let l={};return s[0]!==void 0&&(l.symbol=s[0]),s[1]!==void 0&&(l.depth=s[1]),i=new E({props:l}),h.push(()=>_(i,"symbol",r,s[0])),h.push(()=>_(i,"depth",a,s[1])),{c(){P(i.$$.fragment)},l(o){$(i.$$.fragment,o)},m(o,c){I(i,o,c),n=!0},p(o,c){const p={};!t&&c&1&&(t=!0,p.symbol=o[0],g(()=>t=!1)),!e&&c&2&&(e=!0,p.depth=o[1],g(()=>e=!1)),i.$set(p)},i(o){n||(f(i.$$.fragment,o),n=!0)},o(o){u(i.$$.fragment,o),n=!1},d(o){C(i,o)}}}function w(s){let i,t,e=s[2]&&y(s);return{c(){e&&e.c(),i=d()},l(n){e&&e.l(n),i=d()},m(n,r){e&&e.m(n,r),v(n,i,r),t=!0},p(n,r){n[2]?e?(e.p(n,r),r&4&&f(e,1)):(e=y(n),e.c(),f(e,1),e.m(i.parentNode,i)):e&&(L(),u(e,1,1,()=>{e=null}),z())},i(n){t||(f(e),t=!0)},o(n){u(e),t=!1},d(n){e&&e.d(n),n&&A(i)}}}function J(s){let i=s[2],t,e,n=w(s);return{c(){n.c(),t=d()},l(r){n.l(r),t=d()},m(r,a){n.m(r,a),v(r,t,a),e=!0},p(r,[a]){a&4&&b(i,i=r[2])?(L(),u(n,1,1,N),z(),n=w(r),n.c(),f(n,1),n.m(t.parentNode,t)):n.p(r,a)},i(r){e||(f(n),e=!0)},o(r){u(n),e=!1},d(r){r&&A(t),n.d(r)}}}function K(s,i,t){let e,n,r=!1;q(async()=>{if(window&&window.location&&window.location.search){const o=new Proxy(new URLSearchParams(window.location.search),{get:(p,m)=>p.get(m)});t(0,e=o.symbol||"AAPL");const c=o.depth||"100";t(1,n=parseInt(c)),t(2,r=!0)}});function a(o){e=o,t(0,e)}function l(o){n=o,t(1,n)}return[e,n,r,a,l]}class H extends k{constructor(i){super(),S(this,i,K,J,b,{})}}export{H as default};
