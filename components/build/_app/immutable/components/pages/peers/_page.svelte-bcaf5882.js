import{S as k,i as S,s as b,I as h,J as _,w as P,x as I,y as $,K as g,f,t as u,z as C,o as q,e as d,b as v,d as z,h as A,g as L,B as O}from"../../../chunks/index-a755ff6d.js";import{p as U,C as j}from"../../../chunks/chart-687a12ea.js";async function N(r,i,t={}){if(t[r]!==void 0)return t[r].weight++,t;if(t[r]={weight:10,peers:[]},i===0)return t;try{const e=new Set(await U(r));e.delete(r),t[r].peers=[...e];for(let n in t[r].peers){let s=t[r].peers[n];t=await N(s,i-1,t)}}catch{}return t}async function B(r,i){const t=await N(r,i),e={nodes:[],links:[],categories:[]};let n={},s=0;for(let o in t)n[o]===void 0&&(n[o]=s,e.nodes.push({id:o,name:o,symbolSize:t[o].weight,category:s}),e.categories.push({name:o}),s++);let a={};for(let o in t){a[o]=new Set;for(let p in t[o].peers){const c=t[o].peers[p];if(a[c]!==void 0){a[c].has(o)||a[c].add(o);continue}a[o].has(c)||a[o].add(c)}}for(let o in a){const p=[...a[o]];for(let c in p){const m=p[c];e.links.push({source:o,target:m})}}return{title:{text:`${r} peers`,top:"bottom",left:"right"},tooltip:{},animationDuration:1500,animationEasingUpdate:"quinticInOut",series:[{type:"graph",layout:"circular",data:e.nodes,links:e.links,categories:e.categories,roam:!0,label:{show:!0,position:"center",formatter:"{b}"},lineStyle:{color:"source",curveness:.3},emphasis:{focus:"adjacency",lineStyle:{width:10}}}]}}function D(r){let i,t,e;function n(a){r[3](a)}let s={};return r[0]!==void 0&&(s.option=r[0]),i=new j({props:s}),h.push(()=>_(i,"option",n,r[0])),{c(){P(i.$$.fragment)},l(a){I(i.$$.fragment,a)},m(a,l){$(i,a,l),e=!0},p(a,[l]){const o={};!t&&l&1&&(t=!0,o.option=a[0],g(()=>t=!1)),i.$set(o)},i(a){e||(f(i.$$.fragment,a),e=!0)},o(a){u(i.$$.fragment,a),e=!1},d(a){C(i,a)}}}function E(r,i,t){let{symbol:e}=i,{depth:n}=i,s;q(async function(){t(0,s=await B(e,n))});function a(l){s=l,t(0,s)}return r.$$set=l=>{"symbol"in l&&t(1,e=l.symbol),"depth"in l&&t(2,n=l.depth)},[s,e,n,a]}class J extends k{constructor(i){super(),S(this,i,E,D,b,{symbol:1,depth:2})}}function y(r){let i,t,e,n;function s(o){r[3](o)}function a(o){r[4](o)}let l={};return r[0]!==void 0&&(l.symbol=r[0]),r[1]!==void 0&&(l.depth=r[1]),i=new J({props:l}),h.push(()=>_(i,"symbol",s,r[0])),h.push(()=>_(i,"depth",a,r[1])),{c(){P(i.$$.fragment)},l(o){I(i.$$.fragment,o)},m(o,p){$(i,o,p),n=!0},p(o,p){const c={};!t&&p&1&&(t=!0,c.symbol=o[0],g(()=>t=!1)),!e&&p&2&&(e=!0,c.depth=o[1],g(()=>e=!1)),i.$set(c)},i(o){n||(f(i.$$.fragment,o),n=!0)},o(o){u(i.$$.fragment,o),n=!1},d(o){C(i,o)}}}function w(r){let i,t,e=r[2]&&y(r);return{c(){e&&e.c(),i=d()},l(n){e&&e.l(n),i=d()},m(n,s){e&&e.m(n,s),v(n,i,s),t=!0},p(n,s){n[2]?e?(e.p(n,s),s&4&&f(e,1)):(e=y(n),e.c(),f(e,1),e.m(i.parentNode,i)):e&&(L(),u(e,1,1,()=>{e=null}),z())},i(n){t||(f(e),t=!0)},o(n){u(e),t=!1},d(n){e&&e.d(n),n&&A(i)}}}function K(r){let i=r[2],t,e,n=w(r);return{c(){n.c(),t=d()},l(s){n.l(s),t=d()},m(s,a){n.m(s,a),v(s,t,a),e=!0},p(s,[a]){a&4&&b(i,i=s[2])?(L(),u(n,1,1,O),z(),n=w(s),n.c(),f(n,1),n.m(t.parentNode,t)):n.p(s,a)},i(s){e||(f(n),e=!0)},o(s){u(n),e=!1},d(s){s&&A(t),n.d(s)}}}function M(r,i,t){let e,n,s=!1;q(async()=>{if(window&&window.location&&window.location.search){const o=new Proxy(new URLSearchParams(window.location.search),{get:(c,m)=>c.get(m)});t(0,e=o.symbol||"AAPL");const p=o.depth||"100";t(1,n=parseInt(p)),t(2,s=!0)}});function a(o){e=o,t(0,e)}function l(o){n=o,t(1,n)}return[e,n,s,a,l]}class G extends k{constructor(i){super(),S(this,i,M,K,b,{})}}export{G as default};
