import{S as Z,i as N,s as A,I as b,J as p,w as G,x as T,y as q,K as h,f as w,t as y,z,o as B,e as k,b as J,d as K,h as O,g as R,B as x}from"../../../chunks/index-a755ff6d.js";import{c as E,C as F}from"../../../chunks/chart-687a12ea.js";function H(t){if(!t)return[];let o=[];for(let s=0;s<t.length;s++){const e=t[s];o.push([e.timestamp,e.open,e.close,e.low,e.high,e.volume,e.open<=e.close?1:-1])}return o}async function Q(t,o,s,e,l,i,a){if(l!==0)switch(i=a=Date.now(),e){case"1":i-=l*6e4;break;case"60":i-=l*36e5;break;case"D":i-=l*864e5;break;case"M":i-=l*26784e5;break}let r="",u="";switch(e){case"1":case"60":r=new Date(i).toLocaleString(),u=new Date(a).toLocaleString();break;case"D":case"M":r=new Date(i).toLocaleDateString(),u=new Date(a).toLocaleDateString();break}return new Date(i).toLocaleString(),{dataset:{source:H(await E(s,e,i,a))},title:{text:`${s}: ${r} --> ${u}`},tooltip:{trigger:"axis",axisPointer:{type:"line"}},toolbox:{feature:{dataZoom:{yAxisIndex:!1}}},grid:[{left:"10%",right:"10%",bottom:200},{left:"10%",right:"10%",height:80,bottom:80}],xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},min:"dataMin",max:"dataMax"},{type:"category",gridIndex:1,boundaryGap:!1,axisLine:{onZero:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},min:"dataMin",max:"dataMax"}],yAxis:[{scale:!0,splitArea:{show:!0}},{scale:!0,gridIndex:1,splitNumber:2,axisLabel:{show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}}],dataZoom:[{type:"inside",xAxisIndex:[0,1],start:10,end:100},{show:!0,xAxisIndex:[0,1],type:"slider",bottom:10,start:10,end:100}],visualMap:{show:!1,seriesIndex:1,dimension:6,pieces:[{value:1,color:t},{value:-1,color:o}]},series:[{type:"candlestick",itemStyle:{color:t,color0:o,borderColor:t,borderColor0:o},encode:{x:0,y:[1,2,3,4]}},{name:"Volume",type:"bar",xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#7fbe9e"},large:!0,encode:{x:0,y:5}}]}}function W(t){let o,s,e;function l(a){t[8](a)}let i={};return t[0]!==void 0&&(i.option=t[0]),o=new F({props:i}),b.push(()=>p(o,"option",l,t[0])),{c(){G(o.$$.fragment)},l(a){T(o.$$.fragment,a)},m(a,r){q(o,a,r),e=!0},p(a,[r]){const u={};!s&&r&1&&(s=!0,u.option=a[0],h(()=>s=!1)),o.$set(u)},i(a){e||(w(o.$$.fragment,a),e=!0)},o(a){y(o.$$.fragment,a),e=!1},d(a){z(o,a)}}}function X(t,o,s){let{upColor:e}=o,{downColor:l}=o,{symbol:i}=o,{resolution:a}=o,{last:r}=o,{from:u}=o,{to:c}=o,_;B(async function(){s(0,_=await Q(e,l,i,a,r,u,c))});function C(f){_=f,s(0,_)}return t.$$set=f=>{"upColor"in f&&s(1,e=f.upColor),"downColor"in f&&s(2,l=f.downColor),"symbol"in f&&s(3,i=f.symbol),"resolution"in f&&s(4,a=f.resolution),"last"in f&&s(5,r=f.last),"from"in f&&s(6,u=f.from),"to"in f&&s(7,c=f.to)},[_,e,l,i,a,r,u,c,C]}class Y extends Z{constructor(o){super(),N(this,o,X,W,A,{upColor:1,downColor:2,symbol:3,resolution:4,last:5,from:6,to:7})}}function M(t){let o,s,e,l,i,a,r,u,c;function _(n){t[8](n)}function C(n){t[9](n)}function f(n){t[10](n)}function L(n){t[11](n)}function S(n){t[12](n)}function D(n){t[13](n)}function I(n){t[14](n)}let m={};return t[0]!==void 0&&(m.upColor=t[0]),t[1]!==void 0&&(m.downColor=t[1]),t[2]!==void 0&&(m.symbol=t[2]),t[3]!==void 0&&(m.resolution=t[3]),t[4]!==void 0&&(m.last=t[4]),t[5]!==void 0&&(m.from=t[5]),t[6]!==void 0&&(m.to=t[6]),o=new Y({props:m}),b.push(()=>p(o,"upColor",_,t[0])),b.push(()=>p(o,"downColor",C,t[1])),b.push(()=>p(o,"symbol",f,t[2])),b.push(()=>p(o,"resolution",L,t[3])),b.push(()=>p(o,"last",S,t[4])),b.push(()=>p(o,"from",D,t[5])),b.push(()=>p(o,"to",I,t[6])),{c(){G(o.$$.fragment)},l(n){T(o.$$.fragment,n)},m(n,d){q(o,n,d),c=!0},p(n,d){const g={};!s&&d&1&&(s=!0,g.upColor=n[0],h(()=>s=!1)),!e&&d&2&&(e=!0,g.downColor=n[1],h(()=>e=!1)),!l&&d&4&&(l=!0,g.symbol=n[2],h(()=>l=!1)),!i&&d&8&&(i=!0,g.resolution=n[3],h(()=>i=!1)),!a&&d&16&&(a=!0,g.last=n[4],h(()=>a=!1)),!r&&d&32&&(r=!0,g.from=n[5],h(()=>r=!1)),!u&&d&64&&(u=!0,g.to=n[6],h(()=>u=!1)),o.$set(g)},i(n){c||(w(o.$$.fragment,n),c=!0)},o(n){y(o.$$.fragment,n),c=!1},d(n){z(o,n)}}}function P(t){let o,s,e=t[7]&&M(t);return{c(){e&&e.c(),o=k()},l(l){e&&e.l(l),o=k()},m(l,i){e&&e.m(l,i),J(l,o,i),s=!0},p(l,i){l[7]?e?(e.p(l,i),i&128&&w(e,1)):(e=M(l),e.c(),w(e,1),e.m(o.parentNode,o)):e&&(R(),y(e,1,1,()=>{e=null}),K())},i(l){s||(w(e),s=!0)},o(l){y(e),s=!1},d(l){e&&e.d(l),l&&O(o)}}}function v(t){let o=t[7],s,e,l=P(t);return{c(){l.c(),s=k()},l(i){l.l(i),s=k()},m(i,a){l.m(i,a),J(i,s,a),e=!0},p(i,[a]){a&128&&A(o,o=i[7])?(R(),y(l,1,1,x),K(),l=P(i),l.c(),w(l,1),l.m(s.parentNode,s)):l.p(i,a)},i(i){e||(w(l),e=!0)},o(i){y(l),e=!1},d(i){i&&O(s),l.d(i)}}}function $(t,o,s){let e,l,i,a,r,u,c,_=!1;B(async()=>{if(window&&window.location&&window.location.search){const n=new Proxy(new URLSearchParams(window.location.search),{get:(V,j)=>V.get(j)});s(0,e=n.upColor||"green"),s(1,l=n.downColor||"red"),s(2,i=n.symbol||"AAPL"),s(3,a=n.resolution||"D");const d=n.last||"0";s(4,r=parseInt(d));const g=n.from||"1667278800000";s(5,u=parseInt(g));const U=n.to||"1673121379603";s(5,u=parseInt(U)),s(7,_=!0)}});function C(n){e=n,s(0,e)}function f(n){l=n,s(1,l)}function L(n){i=n,s(2,i)}function S(n){a=n,s(3,a)}function D(n){r=n,s(4,r)}function I(n){u=n,s(5,u)}function m(n){c=n,s(6,c)}return[e,l,i,a,r,u,c,_,C,f,L,S,D,I,m]}class ne extends Z{constructor(o){super(),N(this,o,$,v,A,{})}}export{ne as default};
